#cmsDriver prompts for each stage#

# LHEGS/GEN-SIM #
SEED=$(($(date +%s) % 100 + 1))
cmsDriver.py Configuration/Generator/python/XaaTo4G.py \
 --eventcontent RAWSIM,LHE \
 --customise Configuration/DataProcessing/Utils.addMonitoring \
 --datatier GEN-SIM,LHE --conditions auto:phase1_2017_realistic \
 --beamspot Realistic25ns13TeVEarly2017Collision \
 --customise_commands process.RandomNumberGeneratorService.externalLHEProducer.initialSeed="int(${SEED})" \
 --step LHE,GEN,SIM \
 --geometry DB:Extended \
 --era Run2_2017 \
 --python_filename NPS-X300A20wmLHEGS_1_cfg.py \
 --fileout file:NPS-X300A20wmLHEGS_1.root \
 --number 10 \
 --no_exec --mc

 # Generate min bias sample
 cmsDriver.py Configuration/Generator/python/MinBias_13TeV_pythia8_TuneCUETP8M1_cfi.py \
 -s GEN,SIM -n 10 --conditions auto:phase1_2017_realistic --beamspot Realistic25ns13TeVEarly2017Collision \
 --datatier GEN-SIM --eventcontent FEVTDEBUG --era Run2_2017 --relval 9000,100 \
 --python_filename MinBiasSampleFull3_RunII2017.py --fileout file:MinBiasFull3_RunII2017.root --no_exec

 # Create Premix/PU sample
 cmsDriver.py step1 --evt_type Configuration/Generator/python/SingleNuE10_cfi.py \
 -s GEN,SIM,DIGI:pdigi_valid -n 10 --conditions auto:phase1_2017_realistic \
 --datatier PREMIX --eventcontent PREMIX --procModifiers premix_stage1 \
 --era Run2_2017 --relval 100000,100 \
 --pileup AVE_35_BX_25ns --pileup_input file:MinBiasFull3_RunII2017.root \
 --python_filename MinBiasFullstep21_RunII2017.py --fileout file:MinBiasPremix_RunII2017.root --no_exec

 # Premix + PU
   cmsDriver.py  --eventcontent PREMIXRAW \
  --customise Configuration/DataProcessing/Utils.addMonitoring \
  --datatier GEN-SIM-RAW \
  --conditions auto:phase1_2017_realistic \
  --step DIGI,DATAMIX,L1,DIGI2RAW,HLT:@relval2017 \
  --datamix PreMix \
  --era Run2_2017 \
  --procModifiers premix_stage2 \
  --python_filename NPS-RunIIFall17DRPremix_1_cfg.py \
  --fileout file:NPS-X300A20_Premix_1.root \
  --filein file:NPS-X300A20wmLHEGS_1.root \
  --number 10 \
  --pileup_input file:MinBiasPremix_RunII2017.root \
  --no_exec --mc

# Premix No PU (!Unused)
  cmsDriver.py \
  --eventcontent RAWSIM \
  --customise Configuration/DataProcessing/Utils.addMonitoring \
  --datatier GEN-SIM-RAW \
  --conditions auto:phase1_2017_realistic \
  --step DIGI,L1,DIGI2RAW \
  --era Run2_2017 \
  --python_filename NPS-RunIIFall17DR_NoPileup_cfg.py \
  --fileout file:NPS-X300A20_NoPileup.root \
  --filein file:NPS-X300A20wmLHEGS_1.root \
  --number 10 \
  --no_exec --mc

#AODSIM
cmsDriver.py step2 \
  --filein file:NPS-X300A20_Premix_1.root \
  --fileout file:NPS-X300A20_AODSIM.root \
  --conditions auto:phase1_2017_realistic \
  --step RAW2DIGI,L1Reco,RECO,RECOSIM \
  --datatier AODSIM \
  --eventcontent AODSIM \
  --era Run2_2017 \
  --mc \
  --no_exec \
  --number -1 \
  --python_filename X300A20_AODSIM_cfg.py

#MINIAOD
cmsDriver.py step3 --filein file:NPS-X300A20_AODSIM.root --fileout file:MiniAOD2017.root \
--python_filename MiniAODstep2017.py \
--eventcontent MINIAODSIM --datatier MINIAODSIM --conditions auto:phase1_2017_realistic \
--step PAT --nThreads 8 --geometry DB:Extended \
--era Run2_2017 -n -1 --mc --no_exec

#NANOAOD
cmsDriver.py  --eventcontent NANOEDMAODSIM \
--customise Configuration/DataProcessing/Utils.addMonitoring \
--datatier NANOAODSIM --conditions auto:phase1_2017_realistic \
--step NANO --era Run2_2017 \
--python_filename NPS-X300A20_NanoAOD_1_cfg.py \
--fileout file:NanoAOD_Test.root \
--filein file:MiniAOD2017.root \
--number -1 \
--no_exec --mc

